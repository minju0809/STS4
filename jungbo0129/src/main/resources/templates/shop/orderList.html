<div th:replace="~{/include/thymeleafTop}"></div>

<style>
  tr {
    text-align: center;
  }

  .tdleft {
    text-align: left;
  }
</style>

<section>
  <div align="center">
    <h2>주문서</h2>
    <br>
    <form action="/orderAll.do">
      <table border="1">
        <tr>
          <th>오더순번</th>
          <th>카트순번</th>
          <th>상품번호</th>
          <th>상품이름</th>
          <th>수량</th>
          <th>가격</th>
        </tr>
        <tr th:each="order : ${li}">
          <td><input name="order_idx" th:value="${order.order_idx}" readonly></td>
          <td><input name="cart_idx" th:value="${order.cart_idx}" readonly></td>
          <td><input name="product_idx" th:value="${order.product_idx}" readonly></td>
          <td><input name="product_name" th:value="${order.product_name}" readonly></td>
          <td>
            <select name="product_amount" id="product_amount"
              th:onchange="onAmountChange(this, '[[${order.cart_idx}]]', '[[${cart.total_price}]]', '[[${cart.product_amount}]]')">
              <option th:each="amount : ${#numbers.sequence(1, 5)}" th:value="${amount}"
                th:selected="${amount == order.product_amount}">
                <span th:text="${amount}"></span>
              </option>
            </select>
          </td>
          <td><input name="total_price" id="[[${order.cart_idx}]]_total_price" th:value="${cart.total_price}" readonly>
          </td>
        </tr>
        <tr th:if="${#lists.isEmpty(li)}">
          <td colspan="8" align="center">주문서가 비어있습니다.</td>
        </tr>
        <tr>
          <td colspan="8" align="right">전체 구매 금액:
            <span th:text="${total}"></span>원
          </td>
        </tr>
      </table>
    </form>
  </div>
</section>

<div th:replace="~{/include/thymeleafBottom}"></div>